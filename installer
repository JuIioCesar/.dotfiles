
#!/usr/bin/env bash

# Quit program if any command fails
set -euo pipefail

echo "üöÄ Welcome to the dotfile finstaller!"
echo "-------------------------------------------------"
echo
export DOTFILES_PATH="$HOME/.dotfiles"
echo "üëâ  Cloning into: '$DOTFILES_PATH'"

# To test that git is installed (if not macOS will prompt an installer)
git --version
git clone --depth 1 git@github.com:juliopge/.dotfiles.git "$DOTFILES_PATH"

# Install Oh my zsh!
if [ ! -d "$HOME/.oh-my-zsh" ] 
then
    echo "‚ô¶Ô∏è Installing Oh My Zsh!"
    sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
    
else
    echo "‚úÖ Oh my zsh! is already installed."
fi


if [ ! "$HOME/.oh-my-zsh/custom/plugins/zsh-autosuggestions" ]
then 
     git clone https://github.com/zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-autosuggestions
else 
     echo "‚úÖ Autosuggestions is already installed."
fi


# The plugin is already in the zsh config.
ln -s $DOTFILES_PATH/zsh/.zshrc $HOME/.zsh #Link zsh.

echo "ü¶Ñ finished without any errors"
